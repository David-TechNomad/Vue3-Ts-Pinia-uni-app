import{d as s,G as e,m as a,p as t,o as l,c as o,w as u,a as i,b as r,j as c,r as n,F as p,i as d,h as m,y as g,e as f,t as v,H as y,I as _,B as h,f as b,k as I,v as w}from"./index-ed9e365a.js";import{h as k}from"./http.86124fb0.js";import{_ as x}from"./plugin-vueexport-helper.1b428a4d.js";const S=(s,e)=>k({method:"GET",url:s,data:e}),j=x(s({__name:"hot",props:{type:null},setup(s){const k=s,x=[{type:"1",title:"特惠推荐",url:"/hot/preference"},{type:"2",title:"爆款推荐",url:"/hot/inVogue"},{type:"3",title:"一站买全",url:"/hot/oneStop"},{type:"4",title:"新鲜好物",url:"/hot/new"}].find((s=>s.type===k.type));e({title:x.title});const j=a(""),T=a([]),z=a(0);t((()=>{(async()=>{const s=await S(x.url,{page:1,pageSize:10});j.value=s.result.bannerPicture,T.value=s.result.subTypes})()}));const F=async()=>{const s=T.value[z.value];if(!(s.goodsItems.page<s.goodsItems.pages))return s.finish=!0,h({icon:"none",title:"没有更多数据了~"});s.goodsItems.page++;const e=(await S(x.url,{subType:s.id,page:s.goodsItems.page,pageSize:s.goodsItems.pageSize})).result.subTypes[z.value];s.goodsItems.items.push(...e.goodsItems.items)};return(s,e)=>{const a=d,t=m,h=b,k=I,x=w;return l(),o(t,{class:"viewport"},{default:u((()=>[i(" 推荐封面图 "),r(t,{class:"cover"},{default:u((()=>[r(a,{class:"image",mode:"widthFix",src:j.value},null,8,["src"])])),_:1}),i(" 推荐选项 "),r(t,{class:"tabs"},{default:u((()=>[(l(!0),c(p,null,n(T.value,((s,e)=>(l(),o(h,{key:s.id,class:g(["text",{active:e===z.value}]),onClick:s=>z.value=e},{default:u((()=>[f(v(s.title),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),i(" 推荐列表 "),(l(!0),c(p,null,n(T.value,((s,e)=>y((l(),o(x,{key:s.id,"scroll-y":"",class:"scroll-view",onScrolltolower:F},{default:u((()=>[r(t,{class:"goods"},{default:u((()=>[(l(!0),c(p,null,n(s.goodsItems.items,(s=>(l(),o(k,{class:"navigator","hover-class":"none",key:s.id,url:`/pages/goods/goods?id=${s.id}`},{default:u((()=>[r(a,{class:"thumb",src:s.picture,mode:"aspectFill"},null,8,["src"]),r(t,{class:"name ellipstis"},{default:u((()=>[f(v(s.name),1)])),_:2},1024),r(t,{class:"price"},{default:u((()=>[r(h,{class:"symbol"},{default:u((()=>[f("¥")])),_:1}),r(h,{class:"number"},{default:u((()=>[f(v(s.price),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["url"])))),128))])),_:2},1024),r(t,{class:"loading-text"},{default:u((()=>[f(v(s.finish?"没有更多数据了~":"正在加载..."),1)])),_:2},1024)])),_:2},1024)),[[_,z.value===e]]))),128))])),_:1})}}}),[["__scopeId","data-v-abc543aa"]]);export{j as default};
